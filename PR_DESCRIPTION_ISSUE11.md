# [UI] TOPページ（ランディングページ）のデザインと構築

## 概要

Issue #11の対応として、初見のユーザーに対してリザルト画像をアップするだけでシナリオコードを共有できるという価値を伝え、メイン機能へ誘導するランディングページを実装しました。

## 実施内容

### 1. ランディングページの実装

#### ヒーローセクション
- キャッチコピー「リザルト画像をアップするだけ シナリオコードを共有」を追加
- 「AI解析を試す」ボタンから`/analyze`ページへの導線を確保
- 「最新シナリオを見る」ボタンから最新シナリオセクションへのアンカーリンクを追加
- グラデーション背景（オレンジ→イエロー）とパターンオーバーレイで視覚的なインパクトを強化

#### 3ステップガイド
- スクリーンショットを撮る → AIが自動解析 → みんなで共有の流れを視覚的に説明
- 各ステップに番号付きカードを配置
- ホバー時の視覚的フィードバックを実装

#### 最新シナリオのプレビュー
- データベースから最新6件のシナリオを取得して表示
- 既存の`ScenarioCard`コンポーネントを再利用
- シナリオが存在しない場合の空状態UIを実装

### 2. サーバーコンポーネントへの移行

- クライアントコンポーネントからサーバーコンポーネントに変更
- `getLatestScenarios`関数を追加し、サーバー側でデータ取得を実行
- Supabaseクライアントを直接使用してパフォーマンスを向上

### 3. バグ修正

#### 空配列での`.in()`呼び出しを防止
- `scenarioCodes`が空の場合、武器クエリをスキップして早期リターンするガードを追加
- Supabaseの`.in()`メソッドに空配列を渡すことによるエラーを防止

#### エラーハンドリングの改善
- `scenario_weapons`クエリの`error`をチェックし、ログに記録するように修正
- 武器情報が取得できなくても、シナリオ情報は返すように実装（武器は空配列になる）

### 4. テストの更新

- サーバーコンポーネント用にテストを完全に書き直し
- Supabaseサーバークライアントのモックを追加
- Next.jsの`cookies`と`Link`コンポーネントをモック
- 6つのテストケースを追加：
  - ヒーローセクションの表示
  - CTAボタンの表示とリンク
  - 3ステップガイドの表示
  - 最新シナリオセクションの表示
  - 空状態の表示
  - データベースからの取得

## 技術的な変更点

### ファイル変更

- `app/page.tsx`: クライアントコンポーネントからサーバーコンポーネントに変更、ランディングページのUIを実装
- `app/__tests__/page.test.tsx`: テストをサーバーコンポーネント用に書き直し

### 主な実装詳細

```typescript
// サーバー側で最新シナリオを取得
async function getLatestScenarios(limit: number = 6): Promise<ScenarioListItem[]> {
  const supabase = await createClient()
  // ... シナリオと武器情報を取得
}
```

## デザインの特徴

- **カラースキーム**: オレンジ/イエローのグラデーションで統一
- **レスポンシブ対応**: モバイル/タブレット/デスクトップに対応
- **アクセシビリティ**: セマンティックHTMLと適切なリンク構造
- **パフォーマンス**: サーバー側でデータ取得、必要なデータのみ取得（最新6件）

## 期待される効果

- PC/スマホ両方で「何ができるサイトか」が一目で理解できる
- 解析ページへのクリック率（CTR）を最大化する目立つデザイン
- 初見ユーザーの離脱率を低下

## テスト結果

すべてのテストがパスしています（6テスト、6パス）

```bash
✓ app/__tests__/page.test.tsx  (6 tests) 160ms
```

## 関連Issue

- #11: [UI] TOPページ（ランディングページ）のデザインと構築

